

{% extends "account/rain.html" %}
{% load static %}
{% block link %}
<link rel="stylesheet" href="{%static 'account/log_reg.css'%}">
{% endblock %}
{% block content %}

<body>
    <div class="container">
    <video src="https://cdn.dribbble.com/uploads/48292/original/30fd1f7b63806eff4db0d4276eb1ac45.mp4?1689187515" autoplay muted loop></video>
    <div class="content">
        <div class="text">
           Login
        </div>
        <form action="/login/" method="post">
            {% csrf_token %}
            
           <div class="field">
              <input required="" type="text" class="input emaiL" placeholder="Email" name="email">
              <span class="span"><svg xmlns="http://www.w3.org/2000/svg"  height="20" width="50" fill="#595959" viewBox="0 0 24 24" stroke="#595959"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></g></svg></span>
             
           </div>
           <div class="field">
              <input required="" type="password" class="input passworD"  placeholder="Password" name="password">
              <span class="span"><svg class="" xml:space="preserve" style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" y="0" x="0" height="20" width="50" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" xmlns="http://www.w3.org/2000/svg"><g><path class="" data-original="#000000" fill="#595959" d="M336 192h-16v-64C320 57.406 262.594 0 192 0S64 57.406 64 128v64H48c-26.453 0-48 21.523-48 48v224c0 26.477 21.547 48 48 48h288c26.453 0 48-21.523 48-48V240c0-26.477-21.547-48-48-48zm-229.332-64c0-47.063 38.27-85.332 85.332-85.332s85.332 38.27 85.332 85.332v64H106.668zm0 0"></path></g></svg></span>
              
           </div>
           
           <button type="button" class="button">Sign in</button>
           <div class="sign-up">
              Not a member?
              <a href="/register/">Register</a>
           </div>
        </form>
     </div>
    </div>


    <div class="toast">
        <div class="toast-content">
   
        </div>
        <div class="toast-icon">
           <svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path fill-rule="evenodd" d="M10 0C4.486 0 0 4.486 0 10s4.486 10 10 10 10-4.486 10-10S15.514 0 10 0zM9 6a1 1 0 112 0v4a1 1 0 11-2 0V6zm1 9a1 1 0 100-2 1 1 0 000 2z" fill="#595959"></path></g></svg>     </div>
    </div>


    <script>
        const showToast=(message)=>{
            document.querySelector(".toast-content").innerText=message
            document.querySelector(".toast").style.display="flex"
                document.querySelector(".toast").style.right="20px"

        
       
            setTimeout(() => {
                document.querySelector(".toast").style.right="-1000px"
                document.querySelector(".toast").style.display="none"


            }, 3000);


        }
        //back
        const error="{{ error }}"
        //console.log(error)
        if (error){
            showToast(error)
        }
    </script> 

     <script>
        // //front
         document.querySelector(".button").addEventListener("click",()=>{
             const email=document.querySelector(".emaiL").value
             const passWord=document.querySelector(".passworD").value
            

            const emailRegex = /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/;


             if (!emailRegex.test(email)){

                 showToast("Incorrect email")
                 return
             }
             if (passWord.length<8){
                 showToast("Passwords must be at least 8 characters long.")
                 return
             }
             else{
                 document.querySelector("form").submit()
             }
         })
    </script>   
    
{% endblock %}